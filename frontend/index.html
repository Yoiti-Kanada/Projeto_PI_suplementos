<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boris Suplementos - Catálogo Online</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <style>
        :root {
            --bs-primary: #FFC107; /* Amarelo da paleta */
            --bs-primary-rgb: 255,193,7;
            --bs-secondary: #343a40; /* Preto/Cinza Escuro */
            --bs-light: #f8f9fa; /* Fundo */
            --bs-white: #fff;
            --bs-dark: #212529; /* Preto para rodapé e texto */
        }
        .bg-primary { background-color: var(--bs-primary) !important; }
        .text-primary { color: var(--bs-primary) !important; }
        .btn-warning {
            --bs-btn-color: var(--bs-dark);
            --bs-btn-bg: var(--bs-primary);
            --bs-btn-border-color: var(--bs-primary);
            --bs-btn-hover-color: var(--bs-dark);
            --bs-btn-hover-bg: #e0a800;
            --bs-btn-hover-border-color: #d39e00;
            --bs-btn-active-color: var(--bs-dark);
            --bs-btn-active-bg: #d39e00;
            --bs-btn-active-border-color: #c69500;
            --bs-btn-disabled-color: var(--bs-dark);
            --bs-btn-disabled-bg: var(--bs-primary);
            --bs-btn-disabled-border-color: var(--bs-primary);
        }
        .btn-outline-secondary {
            --bs-btn-color: var(--bs-secondary);
            --bs-btn-border-color: var(--bs-secondary);
            --bs-btn-hover-color: var(--bs-dark);
            --bs-btn-hover-bg: var(--bs-secondary);
            --bs-btn-hover-border-color: var(--bs-secondary);
            --bs-btn-active-color: var(--bs-dark);
            --bs-btn-active-bg: var(--bs-secondary);
            --bs-btn-active-border-color: var(--bs-secondary);
            --bs-btn-disabled-color: var(--bs-secondary);
            --bs-btn-disabled-bg: transparent;
            --bs-gradient: none;
        }

        body { background-color: var(--bs-light); color: var(--bs-dark); }
        .navbar { background-color: var(--bs-dark); box-shadow: 0 2px 4px rgba(0,0,0,.2); }
        
        /* Ajuste do tamanho do logo para telas maiores */
        .navbar-brand img { height: 120px; } /* Altura padrão para telas maiores */

        /* Media Query para telas menores (celulares) */
        @media (max-width: 767.98px) { /* Corresponde a 'sm' no Bootstrap */
            .navbar-brand img {
                height: 120px; /* Reduz o tamanho do logo em telas pequenas */
            }
            .navbar-brand span { /* Opcional: ajustar tamanho do texto ao lado do logo */
                font-size: 1.2rem;
            }
            .hero-section {
                padding: 60px 0; /* Menos padding em telas pequenas */
            }
            .hero-section h1 {
                font-size: 2.5rem; /* Reduz o tamanho do título em telas pequenas */
            }
            .hero-section p.lead {
                font-size: 1rem; /* Reduz o tamanho do lead em telas pequenas */
            }
        }


        .navbar-brand span { color: var(--bs-white); margin-left: 10px; font-size: 1.5rem;} /* Cor do texto "Boris Suplementos" */

        .hero-section {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('http://localhost:3001/images/hero-bg.png') no-repeat top center; 
            background-size: cover;
            color: white;
            padding: 100px 0;
            text-align: center;
        }
        .product-card { 
            transition: transform .2s, box-shadow .2s; 
            border: 1px solid #e9ecef;
            border-radius: 10px; 
            overflow: hidden; 
            background-color: var(--bs-white);
            box-shadow: 0 4px 8px rgba(0,0,0,.05);
        }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 8px 16px rgba(0,0,0,.15); }
        .product-card .card-body { display: flex; flex-direction: column; }
        .product-card .card-text.description { font-size: 0.9rem; color: #6c757d; min-height: 90px; }
        .btn-custom-order { background-color: #25D366; border-color: #25D366; color: white; font-weight: bold; }
        .btn-custom-order:hover { background-color: #1DAA50; border-color: #1DAA50; }
        .section-title { margin-bottom: 40px; font-weight: bold; color: var(--bs-dark); }
        .modal-body ul { list-style: none; padding: 0; }
        .modal-body li { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #eee; }
        
        .toast {
            background-color: var(--bs-white);
            color: var(--bs-dark);
            border: 1px solid rgba(0,0,0,.1);
            box-shadow: 0 0.5rem 1rem rgba(0,0,0,.15);
        }
        .toast-header {
            background-color: var(--bs-light);
            border-bottom: 1px solid rgba(0,0,0,.05);
            color: var(--bs-dark);
        }
        /* Estilo para links sociais no rodapé */
        .footer-social-link {
            color: var(--bs-white);
            font-size: 1.5rem;
            margin: 0 10px;
            transition: color 0.3s ease;
        }
        .footer-social-link:hover {
            color: var(--bs-primary);
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg sticky-top">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <img src="http://localhost:3001/images/logo-boris.png" alt="Boris Suplementos Logo" class="me-2"> <span class="fw-bold d-none d-sm-inline">Boris Suplementos</span>
            </a>
            <div class="d-flex">
                <button class="btn btn-warning fw-bold" data-bs-toggle="modal" data-bs-target="#cartModal">
                    <i class="bi bi-card-list"></i> Meu Pedido (<span id="cart-count">0</span>)
                </button>
            </div>
        </div>
    </nav>

    <header class="hero-section">
        <div class="container">
            <h1 class="display-4 fw-bold">Monte seu Pedido Facilmente</h1>
            <p class="lead">Qualidade e potência para seus treinos. Peça agora e receba em casa!</p>
            <a href="#produtos" class="btn btn-lg btn-warning mt-3">Ver Catálogo</a>
        </div>
    </header>

    <main class="container my-5" id="produtos">
    <h2 class="text-center section-title">Nosso Catálogo</h2>
    <div id="product-list" class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">

        </div>
</main>

    <div class="modal fade" id="cartModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Resumo do Pedido</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body" id="cart-items">
            <p class="text-center">Seu pedido está vazio.</p>
          </div>
          <div class="modal-footer">
            <strong class="me-auto">Total: <span id="cart-total">R$ 0,00</span></strong>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Continuar Escolhendo</button>
            <button type="button" class="btn btn-custom-order" onclick="finalizeOrder()">
                <i class="bi bi-whatsapp"></i> Finalizar Pedido no WhatsApp
            </button>
          </div>
        </div>
      </div>
    </div>

    <footer class="bg-dark text-white pt-4 pb-4">
        <div class="container text-center">
            <p>&copy; 2025 Boris Suplementos. Todos os direitos reservados.</p>
            <div class="mt-3">
                <a href="https://wa.me/5514999998888" target="_blank" class="footer-social-link" aria-label="WhatsApp da Boris Suplementos">
                    <i class="bi bi-whatsapp"></i>
                </a>
                <a href="https://www.instagram.com/borissuplementos/" target="_blank" class="footer-social-link" aria-label="Instagram da Boris Suplementos">
                    <i class="bi bi-instagram"></i>
                </a>
                </div>
        </div>
    </footer>

    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Substituir pelo número de WhatsApp da empresa
        const whatsappNumber = "5514999998888";

        let cart = [];

        function addToCart(id, name, price) {
            const existingProduct = cart.find(item => item.id === id);
            if (existingProduct) {
                existingProduct.quantity++;
            } else {
                cart.push({ id, name, price, quantity: 1 });
            }
            updateCartUI();
            
            const toastContainer = document.getElementById('toast-container');
            const toastHTML = `
                <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header">
                        <strong class="me-auto"><i class="bi bi-check-circle-fill text-success"></i> Produto Adicionado</strong>
                        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body">
                        "${name}" foi adicionado ao seu pedido!
                    </div>
                </div>`;
            toastContainer.innerHTML = toastHTML;
            const toast = new bootstrap.Toast(toastContainer.querySelector('.toast'));
            toast.show();
        }

        function removeFromCart(id) {
            const productIndex = cart.findIndex(item => item.id === id);
            if (productIndex > -1) {
                if (cart[productIndex].quantity > 1) {
                    cart[productIndex].quantity--;
                } else {
                    cart.splice(productIndex, 1);
                }
            }
            updateCartUI();
        }

        function updateCartUI() {
            const cartCount = document.getElementById('cart-count');
            const cartItems = document.getElementById('cart-items');
            const cartTotal = document.getElementById('cart-total');
            let totalItems = 0;
            let totalPrice = 0;
            
            cart.forEach(item => totalItems += item.quantity);
            cartCount.innerText = totalItems;

            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="text-center">Seu pedido está vazio.</p>';
            } else {
                cartItems.innerHTML = '<ul>';
                cart.forEach(item => {
                    totalPrice += item.price * item.quantity;
                    cartItems.innerHTML += `
                        <li>
                            <div>
                                ${item.quantity}x ${item.name}<br>
                                <small class="text-muted">R$ ${(item.price * item.quantity).toFixed(2).replace('.',',')}</small>
                            </div>
                            <button class="btn btn-outline-danger btn-sm" onclick="removeFromCart(${item.id})">
                                <i class="bi bi-trash-fill"></i>
                            </button>
                        </li>
                    `;
                });
                cartItems.innerHTML += '</ul>';
            }
            
            cartTotal.innerText = `R$ ${totalPrice.toFixed(2).replace('.',',')}`;
        }

        function finalizeOrder() {
            if (cart.length === 0) {
                alert("Seu pedido está vazio. Adicione produtos antes de finalizar.");
                return;
            }

            let message = "Olá! Gostaria de fazer o seguinte pedido:\n\n";
            let totalPrice = 0;

            cart.forEach(item => {
                message += `*${item.quantity}x* - ${item.name}\n`;
                totalPrice += item.price * item.quantity;
            });

            message += `\n*Total do Pedido:* R$ ${totalPrice.toFixed(2).replace('.',',')}\n\n`;
            message += "Aguardo as instruções para pagamento e entrega. Obrigado!";

            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
        }
    </script>
    
    <div id="toast-container" class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 11"></div>

 <script>
        // Novo script para buscar dados da API
        document.addEventListener('DOMContentLoaded', () => {
            fetchProducts();
        });

        const api_url = 'http://localhost:3001/api/products';

        async function fetchProducts() {
            try {
                const response = await fetch(api_url);
                const products = await response.json();
                renderProducts(products);
            } catch (error) {
                console.error('Erro ao buscar produtos:', error);
                
                const productList = document.getElementById('product-list');
                productList.innerHTML = '<p class="text-center text-danger">Não foi possível carregar os produtos. Tente novamente mais tarde.</p>';
            }
        }

        function renderProducts(products) {
            const productList = document.getElementById('product-list');
            productList.innerHTML = ''; // Limpa a lista antes de adicionar os novos itens

            products.forEach(product => {
                const productCardHTML = `
                    <div class="col">
                        <div class="card h-100 product-card">
                            <img src="${product.image}" class="card-img-top" alt="${product.name}">
                            <div class="card-body text-center">
                                <h5 class="card-title">${product.name}</h5>
                                <p class="card-text description">${product.description}</p>
                                <p class="card-text fs-4 fw-bold mt-auto">R$ ${product.price.toFixed(2).replace('.', ',')}</p>
                            </div>
                            <div class="card-footer bg-white border-0 text-center p-3">
                                 <button class="btn btn-outline-secondary w-100" 
                                    onclick="addToCart(${product.id}, '${product.name}', ${product.price})">
                                    Adicionar ao Pedido
                                 </button>
                            </div>
                        </div>
                    </div>
                `;
                productList.innerHTML += productCardHTML;
            });
        }
    </script>

</body>
</html>   
